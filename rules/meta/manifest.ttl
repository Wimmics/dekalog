@prefix mf: <http://www.w3.org/2001/sw/DataAccess/tests/test-manifest#> .
@prefix kgi: <http://ns.inria.fr/kg/index#> .

<> a mf:Manifest ;
    mf:entries (
            <equivalences.ttl>
            <modifiedUpdate.ttl>
            <exampleQueries.ttl>
        ) .

<equivalences.ttl> a mf:ManifestEntry ;
    kgi:onSuccess (
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> INSERT { ?s rdfs:label ?o . } WHERE { ?s skos:prefLabel ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> INSERT { ?s skos:prefLabel ?o . } WHERE { ?s rdfs:label ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX dcterms: <http://purl.org/dc/terms/> INSERT { ?s rdfs:label ?o . } WHERE { ?s dcterms:title ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX dcterms: <http://purl.org/dc/terms/> INSERT { ?s dcterms:title ?o . } WHERE { ?s rdfs:label ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s rdfs:label ?o . } WHERE { ?s foaf:name ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s foaf:name ?o . } WHERE { ?s rdfs:label ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX schema: <http://schema.org/> INSERT { ?s rdfs:label ?o . } WHERE { ?s schema:name ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX schema: <http://schema.org/> INSERT { ?s schema:name ?o . } WHERE { ?s rdfs:label ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX schema: <http://schema.org/> INSERT { ?s skos:prefLabel ?o . } WHERE { ?s schema:name ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX schema: <http://schema.org/> INSERT { ?s schema:name ?o . } WHERE { ?s skos:prefLabel ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX dcterms: <http://purl.org/dc/terms/> INSERT { ?s skos:prefLabel ?o . } WHERE { ?s dcterms:title ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX dcterms: <http://purl.org/dc/terms/> INSERT { ?s dcterms:title ?o . } WHERE { ?s skos:prefLabel ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s skos:prefLabel ?o . } WHERE { ?s foaf:name ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s foaf:name ?o . } WHERE { ?s skos:prefLabel ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s schema:name ?o . } WHERE { ?s dcterms:title ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s dcterms:title ?o . } WHERE { ?s schema:name ?o . } """ ]
        [ mf:action """PREFIX schema: <http://schema.org/> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s schema:name ?o . } WHERE { ?s foaf:name ?o . } """ ]
        [ mf:action """PREFIX schema: <http://schema.org/> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s foaf:name ?o . } WHERE { ?s schema:name ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s dcterms:title ?o . } WHERE { ?s foaf:name ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s foaf:name ?o . } WHERE { ?s dcterms:title ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s dcterms:publisher ?o . } WHERE { ?s schema:publisher ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s schema:publisher ?o . } WHERE { ?s dcterms:publisher ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s dcterms:subject ?o . } WHERE { ?s schema:keywords ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s schema:keywords ?o . } WHERE { ?s dcterms:subject ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s dcterms:creator ?o . } WHERE { ?s schema:author ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s schema:author ?o . } WHERE { ?s dcterms:creator ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX prov: <http://www.w3.org/ns/prov#> INSERT { ?s dcterms:creator ?o . } WHERE { ?s prov:wasAttributedTo ?o . } """ ]
        [ mf:action """PREFIX prov: <http://www.w3.org/ns/prov#> PREFIX dcterms: <http://purl.org/dc/terms/> INSERT { ?s prov:wasAttributedTo ?o . } WHERE { ?s dcterms:creator ?o . } """ ]
        [ mf:action """PREFIX prov: <http://www.w3.org/ns/prov#> PREFIX schema: <http://schema.org/> INSERT { ?s schema:author ?o . } WHERE { ?s prov:wasAttributedTo ?o . } """ ]
        [ mf:action """PREFIX prov: <http://www.w3.org/ns/prov#> PREFIX schema: <http://schema.org/> INSERT { ?s prov:wasAttributedTo ?o . } WHERE { ?s schema:author ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s dcterms:licence ?o . } WHERE { ?s schema:licence ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s schema:licence ?o . } WHERE { ?s dcterms:licence ?o . } """ ]
        [ mf:action """PREFIX sd: <http://www.w3.org/ns/sparql-service-description#> PREFIX dcat: <http://www.w3.org/ns/dcat#> INSERT { $endpointDescription sd:endpoint ?o . } WHERE { $datasetDescription dcat:endpointUrl ?o . } """ ]
        [ mf:action """PREFIX sd: <http://www.w3.org/ns/sparql-service-description#> PREFIX dcat: <http://www.w3.org/ns/dcat#> INSERT { $endpointDescription dcat:endpointUrl ?o . } WHERE { $datasetDescription sd:endpoint ?o . } """ ]
        [ mf:action """PREFIX sd: <http://www.w3.org/ns/sparql-service-description#> PREFIX void: <http://rdfs.org/ns/void#> INSERT { $endpointDescription sd:endpoint ?o . } WHERE { $datasetDescription void:sparqlEndpoint ?o . } """ ]
        [ mf:action """PREFIX sd: <http://www.w3.org/ns/sparql-service-description#> PREFIX void: <http://rdfs.org/ns/void#> INSERT { $datasetDescription void:sparqlEndpoint ?o . } WHERE { $endpointDescription sd:endpoint ?o . } """ ]
        [ mf:action """PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX void: <http://rdfs.org/ns/void#> INSERT { $datasetDescription void:sparqlEndpoint ?o . } WHERE { $endpointDescription dcat:endpointUrl ?o . } """ ]
        [ mf:action """PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX void: <http://rdfs.org/ns/void#> INSERT { $endpointDescription dcat:endpointUrl ?o . } WHERE { $datasetDescription void:sparqlEndpoint ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> INSERT { ?s rdfs:comment ?o . } WHERE { ?s skos:definition ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> INSERT { ?s skos:definition ?o . } WHERE { ?s rdfs:comment ?o . } """ ]
        <modifiedUpdate.ttl>
    ) .

<modifiedUpdate.ttl> a mf:ManifestEntry ;
    kgi:onSuccess (
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                DELETE {
                    $metadataDescription dcterms:modified ?mod .
                }
                INSERT {
                    $metadataDescription dcterms:modified $dateLiteral .
                }
                WHERE {
                    OPTIONAL { $metadataDescription dcterms:modified ?mod . }
                }
            """
        ]
    ) .

<exampleQueries.ttl> a mf:ManifestEntry ;
    kgi:onSuccess (
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX kgi: <http://ns.inria.fr/kg/index#> PREFIX prov: <http://www.w3.org/ns/prov#> SELECT DISTINCT ?rule (count(DISTINCT ?base) AS ?count) WHERE { ?base a  dcat:Dataset . ?metadata kgi:curated ?base . ?metadata prov:wasGeneratedBy ?activity . ?activity a prov:Activity ;  prov:used ?rule . } GROUP BY ?rule ORDER BY DESC(?count)" ;
                        dcterms:description "Extract the list of rules used with the number of bases that have used them."
                    ]
                }
            """
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX kgi: <http://ns.inria.fr/kg/index#> PREFIX voidex: <http://ldf.fi/void-ext#> SELECT ?datasetDesc ?endpoint ?class ?triples WHERE { ?datasetDesc a dcat:Dataset . ?datasetDesc void:sparqlEndpoint ?endpoint . ?datasetDesc void:classPartition ?partition . ?partition void:class ?class . ?partition void:triples ?triples . } GROUP BY ?endpoint ORDER BY DESC( ?datasetDesc) " ;
                        dcterms:description "Number of triples per class per KB."
                    ]
                }
            """
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX kgi: <http://ns.inria.fr/kg/index#> PREFIX voidex: <http://ldf.fi/void-ext#> SELECT ?datasetDesc ?endpoint ?class ?triples WHERE { ?datasetDesc a dcat:Dataset . ?datasetDesc void:sparqlEndpoint ?endpoint . ?datasetDesc void:classPartition ?partition . ?partition void:class ?class . ?partition void:classes ?triples . } GROUP BY ?endpoint ORDER BY DESC( ?datasetDesc) " ;
                        dcterms:description "Number of classes used conjointly per class per KB."
                    ]
                }
            """
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX kgi: <http://ns.inria.fr/kg/index#> SELECT DISTINCT ?base ?test ?outcome WHERE { ?base a dcat:Dataset . ?metadata kgi:curated ?base . ?metadata kgi:trace ?trace . ?trace earl:result ?result . ?result earl:outcome ?outcome . ?trace earl:test ?test . } GROUP BY ?metadata ?result ORDER BY DESC( ?base) ASC(?test)" ;
                        dcterms:description "Returns the list of tests and their outcome for each KB."
                    ]
                }
            """
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#> PREFIX sd: <http://www.w3.org/ns/sparql-service-description#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX kgi: <http://ns.inria.fr/kg/index#> SELECT DISTINCT ?datasetDesc ?endpoint ?feature WHERE { ?datasetDesc a dcat:Dataset . ?datasetDesc void:sparqlEndpoint ?endpoint . ?endpointDesc a sd:Service . ?endpointDesc sd:endpoint ?endpoint . ?endpointDesc sd:feature ?feature . FILTER( CONTAINS(str(?feature), str(sd:))) } GROUP BY ?endpointDesc ?feature ORDER BY DESC( ?datasetDesc)" ;
                        dcterms:description "List of the SPARQL-SD features of the endpoint of each KB."
                    ]
                }
            """
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX kgi: <http://ns.inria.fr/kg/index#> PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> SELECT DISTINCT ?description ?query WHERE { kgi:catalogRoot skos:example ?exampleRes . ?exampleRes dcterms:description ?description . ?exampleRes dcterms:subject ?query . }" ;
                        dcterms:description "Returns the list of example queries."
                    ]
                }
            """
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX kgi: <http://ns.inria.fr/kg/index#> PREFIX voidex: <http://ldf.fi/void-ext#> SELECT ?datasetDesc ?endpoint ?class WHERE { ?datasetDesc a dcat:Dataset . ?datasetDesc void:sparqlEndpoint ?endpoint . ?datasetDesc void:classPartition ?partition . ?partition void:class ?class . } GROUP BY ?endpoint ORDER BY DESC( ?datasetDesc)" ;
                        dcterms:description "List of classes per KB."
                    ]
                }
            """
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX kgi: <http://ns.inria.fr/kg/index#> PREFIX voidex: <http://ldf.fi/void-ext#> PREFIX sd: <http://www.w3.org/ns/sparql-service-description#> SELECT ?datasetDesc ?endpointDesc ?metadataDesc ?endpoint WHERE { ?datasetDesc a dcat:Dataset . ?datasetDesc void:sparqlEndpoint ?endpoint . ?endpointDesc sd:endpoint ?endpoint . ?metadataDesc kgi:curated ?datasetDesc , ?endpointDesc . } GROUP BY ?endpoint ORDER BY DESC( ?datasetDesc)" ;
                        dcterms:description "Returns the list description resources for the dataset, endpoint and metadata of each KB."
                    ]
                }
            """
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX kgi: <http://ns.inria.fr/kg/index#> PREFIX voidex: <http://ldf.fi/void-ext#> SELECT ?datasetDesc ?endpoint ?IRIs WHERE { ?datasetDesc a dcat:Dataset . ?datasetDesc void:sparqlEndpoint ?endpoint . ?datasetDesc voidex:distinctIRIReferences ?IRIs . } GROUP BY ?endpoint ORDER BY DESC( ?datasetDesc)" ;
                        dcterms:description "Number of IRIs per KB."
                    ]
                }
            """
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX kgi: <http://ns.inria.fr/kg/index#> SELECT DISTINCT ?base ?test ?info WHERE { ?base a dcat:Dataset . ?metadata kgi:curated ?base . ?metadata kgi:trace ?trace . ?trace earl:result ?result . ?result earl:outcome earl:failed . ?result earl:info ?info . ?trace earl:test ?test . } GROUP BY ?metadata ?result ORDER BY DESC( ?base) ASC(?test)" ;
                        dcterms:description "Returns the message associated with failed tests."
                    ]
                }
            """
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX kgi: <http://ns.inria.fr/kg/index#> PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX prov: <http://www.w3.org/ns/prov#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX sd: <http://www.w3.org/ns/sparql-service-description#> SELECT DISTINCT ?info (count(?test) AS ?count) WHERE { ?base a dcat:Dataset . ?metadata kgi:curated ?base . ?metadata kgi:trace ?trace . ?trace earl:result ?result . ?result earl:outcome earl:failed . ?result earl:info ?info . ?trace earl:test ?test . } GROUP BY ?info ORDER BY DESC( ?count)" ;
                        dcterms:description "Returns the message associated with failed tests and the number of times they appear in the index."
                    ]
                }"""
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX kgi: <http://ns.inria.fr/kg/index#> SELECT DISTINCT ?base (count(?test) AS ?count)  WHERE { ?base a  dcat:Dataset . ?metadata kgi:curated ?base . ?metadata kgi:trace ?trace . ?trace earl:result ?result . ?result earl:outcome earl:passed . ?trace earl:test ?test . } GROUP BY ?base  ORDER BY DESC( ?count) ASC(?base)" ;
                        dcterms:description "Returns the number of tests passed for each base."
                    ]
                }"""
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX kgi: <http://ns.inria.fr/kg/index#> SELECT DISTINCT ?base (count(?test) AS ?count)  WHERE { ?base a  dcat:Dataset . ?metadata kgi:curated ?base . ?metadata kgi:trace ?trace . ?trace earl:result ?result . ?result earl:outcome earl:failed . ?trace earl:test ?test . } GROUP BY ?base  ORDER BY DESC( ?count) ASC(?base)" ;
                        dcterms:description "Returns the number of tests failed for each base."
                    ]
                }"""
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#> PREFIX dcat: <http://www.w3.org/ns/dcat#> PREFIX earl: <http://www.w3.org/ns/earl#> PREFIX kgi: <http://ns.inria.fr/kg/index#> PREFIX voidex: <http://ldf.fi/void-ext#> PREFIX dqv: <http://www.w3.org/ns/dqv#> PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> SELECT (count(DISTINCT ?endpoint) AS ?count) WHERE {   ?endpointDesc dcat:endpointUrl ?endpoint .   ?measurement dqv:computedOn ?endpointDesc .   ?measurement dqv:isMeasurementOf <https://raw.githubusercontent.com/Wimmics/dekalog/master/rules/check/reachability.ttl> .   ?measurement dqv:value 'true'^^xsd:boolean }" ;
                        dcterms:description "Returns the number of tests that passed the availability test."
                    ]
                }"""
        ]
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
                PREFIX kgi: <http://ns.inria.fr/kg/index#>
                INSERT DATA {
                    kgi:catalogRoot skos:example [
                        dcterms:subject "PREFIX void: <http://rdfs.org/ns/void#>     PREFIX dcat: <http://www.w3.org/ns/dcat#>     PREFIX earl: <http://www.w3.org/ns/earl#>     PREFIX kgi: <http://ns.inria.fr/kg/index#>     SELECT DISTINCT ?test (count(?result) AS ?count)    WHERE {       ?base a  dcat:Dataset .       ?metadata kgi:curated ?base .      ?metadata kgi:trace ?trace .       ?trace earl:result ?result .       ?result earl:outcome earl:failed .       ?trace earl:test ?test .     } GROUP BY ?test ORDER BY DESC(?count)" ;
                        dcterms:description "Returns the tests sorted by their number of failures."
                    ]
                }"""
        ]
    )
