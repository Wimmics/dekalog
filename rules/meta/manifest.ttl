@prefix mf: <http://www.w3.org/2001/sw/DataAccess/tests/test-manifest#> .
@prefix kgi: <http://ns.inria.fr/kg/index#> .

<> a mf:Manifest ;
    mf:entries (
            <equivalences.ttl>
            <modifiedUpdate.ttl>
        ) .

<equivalences.ttl> a mf:ManifestEntry ;
    kgi:onSuccess (
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> INSERT { ?s rdfs:label ?o . } WHERE { ?s skos:prefLabel ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> INSERT { ?s skos:prefLabel ?o . } WHERE { ?s rdfs:label ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX dcterms: <http://purl.org/dc/terms/> INSERT { ?s rdfs:label ?o . } WHERE { ?s dcterms:title ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX dcterms: <http://purl.org/dc/terms/> INSERT { ?s dcterms:title ?o . } WHERE { ?s rdfs:label ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s rdfs:label ?o . } WHERE { ?s foaf:name ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s foaf:name ?o . } WHERE { ?s rdfs:label ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX schema: <http://schema.org/> INSERT { ?s rdfs:label ?o . } WHERE { ?s schema:name ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX schema: <http://schema.org/> INSERT { ?s schema:name ?o . } WHERE { ?s rdfs:label ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX schema: <http://schema.org/> INSERT { ?s skos:prefLabel ?o . } WHERE { ?s schema:name ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX schema: <http://schema.org/> INSERT { ?s schema:name ?o . } WHERE { ?s skos:prefLabel ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX dcterms: <http://purl.org/dc/terms/> INSERT { ?s skos:prefLabel ?o . } WHERE { ?s dcterms:title ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX dcterms: <http://purl.org/dc/terms/> INSERT { ?s dcterms:title ?o . } WHERE { ?s skos:prefLabel ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s skos:prefLabel ?o . } WHERE { ?s foaf:name ?o . } """ ]
        [ mf:action """PREFIX skos: <http://www.w3.org/2004/02/skos/core#> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s foaf:name ?o . } WHERE { ?s skos:prefLabel ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s schema:name ?o . } WHERE { ?s dcterms:title ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s dcterms:title ?o . } WHERE { ?s schema:name ?o . } """ ]
        [ mf:action """PREFIX schema: <http://schema.org/> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s schema:name ?o . } WHERE { ?s foaf:name ?o . } """ ]
        [ mf:action """PREFIX schema: <http://schema.org/> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s foaf:name ?o . } WHERE { ?s schema:name ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s dcterms:title ?o . } WHERE { ?s foaf:name ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX foaf: <http://xmlns.com/foaf/0.1/> INSERT { ?s foaf:name ?o . } WHERE { ?s dcterms:title ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s dcterms:publisher ?o . } WHERE { ?s schema:publisher ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s schema:publisher ?o . } WHERE { ?s dcterms:publisher ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s dcterms:subject ?o . } WHERE { ?s schema:keywords ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s schema:keywords ?o . } WHERE { ?s dcterms:subject ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s dcterms:creator ?o . } WHERE { ?s schema:author ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s schema:author ?o . } WHERE { ?s dcterms:creator ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX prov: <http://www.w3.org/ns/prov#> INSERT { ?s dcterms:creator ?o . } WHERE { ?s prov:wasAttributedTo ?o . } """ ]
        [ mf:action """PREFIX prov: <http://www.w3.org/ns/prov#> PREFIX dcterms: <http://purl.org/dc/terms/> INSERT { ?s prov:wasAttributedTo ?o . } WHERE { ?s dcterms:creator ?o . } """ ]
        [ mf:action """PREFIX prov: <http://www.w3.org/ns/prov#> PREFIX schema: <http://schema.org/> INSERT { ?s schema:author ?o . } WHERE { ?s prov:wasAttributedTo ?o . } """ ]
        [ mf:action """PREFIX prov: <http://www.w3.org/ns/prov#> PREFIX schema: <http://schema.org/> INSERT { ?s prov:wasAttributedTo ?o . } WHERE { ?s schema:author ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s dcterms:licence ?o . } WHERE { ?s schema:licence ?o . } """ ]
        [ mf:action """PREFIX dcterms: <http://purl.org/dc/terms/> PREFIX schema: <http://schema.org/> INSERT { ?s schema:licence ?o . } WHERE { ?s dcterms:licence ?o . } """ ]
        [ mf:action """PREFIX sd: <http://www.w3.org/ns/sparql-service-description#> PREFIX void: <http://rdfs.org/ns/void#> INSERT { $endpointDescription sd:endpoint ?o . } WHERE { $datasetDescription void:sparqlEndpoint ?o . } """ ]
        [ mf:action """PREFIX sd: <http://www.w3.org/ns/sparql-service-description#> PREFIX void: <http://rdfs.org/ns/void#> INSERT { $datasetDescription void:sparqlEndpoint ?o . } WHERE { $endpointDescription sd:endpoint ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> INSERT { ?s rdfs:comment ?o . } WHERE { ?s skos:definition ?o . } """ ]
        [ mf:action """PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> INSERT { ?s skos:definition ?o . } WHERE { ?s rdfs:comment ?o . } """ ]
        <modifiedUpdate.ttl>
    ) .

<modifiedUpdate.ttl> a mf:ManifestEntry ;
    kgi:onSuccess (
        [
            mf:action """
                PREFIX dcterms: <http://purl.org/dc/terms/>
                DELETE {
                    $metadataDescription dcterms:modified ?mod .
                }
                INSERT {
                    $metadataDescription dcterms:modified $dateLiteral .
                }
                WHERE {
                    OPTIONAL { $metadataDescription dcterms:modified ?mod . }
                }
            """
        ]
    ) .
